<html lang="en"><head><meta http-equiv="origin-trial" content="Az520Inasey3TAyqLyojQa8MnmCALSEU29yQFW8dePZ7xQTvSt73pHazLFTK5f7SyLUJSo2uKLesEtEa9aUYcgMAAACPeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZS5jb206NDQzIiwiZmVhdHVyZSI6IkRpc2FibGVUaGlyZFBhcnR5U3RvcmFnZVBhcnRpdGlvbmluZyIsImV4cGlyeSI6MTcyNTQwNzk5OSwiaXNTdWJkb21haW4iOnRydWUsImlzVGhpcmRQYXJ0eSI6dHJ1ZX0=">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">	<title>
	Manager Portal	</title>
	<meta name="ROBOTS" content="NOINDEX, NOFOLLOW">

			<!--Added by Sergio (caaker copy and paste from portal.ctp) BEGIN-->
		<script type="text/javascript" async="" src="https://www.gstatic.com/recaptcha/releases/-QbJqHfGOUB8nuVRLvzFLVed/recaptcha__en.js" crossorigin="anonymous" integrity="sha384-oyOrIfu0dTVXgJDnDwTkpAOw6OQnC6D4wN0pmPLvl75dXBhYohgWHMyv3Y05PPLU"></script><script type="text/javascript" src="/portal/locale/icu.js"></script>
		<script type="text/javascript" src="/portal/locale/translate.js"></script>
		<script type="text/javascript" src="/portal/locale/en_us/LC_MESSAGES/i18nJS.js"></script>
		<script type="text/javascript">
		//window.addEventListener('load', function(){
		if (i18nJSON) _.setTranslation(i18nJSON);//POTENTIAL ERROR: Removed window onload event listener because it was causing problems with validationEngine translations
		//});
		</script>
		<link rel="shortcut icon" type="image/x-icon" href="https://portal.corpvoip.ca/ns-api/?object=image&amp;action=read&amp;filename=favicon.gif&amp;server=portal.corpvoip.ca">
		<link rel="icon" type="image/x-icon" href="https://portal.corpvoip.ca/ns-api/?object=image&amp;action=read&amp;filename=favicon.gif&amp;server=portal.corpvoip.ca">
								<link rel="stylesheet" href="/portal/css/basicCSS.php?version=1694618589&amp;ver=43.4.2 " type="text/css">
		<link rel="stylesheet" href="/portal/css/portal.php?background=%23dedddc&amp;primary1=%230ca5de&amp;primary2=%230ca5de&amp;bar1=%238c8c8c&amp;bar2=%23cccccc" type="text/css">
				<link rel="stylesheet" href="https://apps.iplogin.ca/v38.css" type="text/css">
						<script type="text/javascript" src="/portal/js/basicJS.php?version=1694618589&amp;ver=43.4.2 "></script>
		<script type="text/javascript">
		var servertime = '2023-11-29 22:32:29';
		</script>

<script type="text/javascript" src="https://accounts.google.com/gsi/client"></script><meta http-equiv="origin-trial" content="A+N5HpM5gDAUeupaWw3J2yuMrpgH0IC7KtFHAqtmHkW8Vr+dPpJWuOpMNIRh3ybxyoIUKlvDQs7+VGPfYdQ/qQUAAABxeyJvcmlnaW4iOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb206NDQzIiwiZmVhdHVyZSI6IkZlZENtQXV0b1JlYXV0aG4iLCJleHBpcnkiOjE2OTE1MzkxOTksImlzVGhpcmRQYXJ0eSI6dHJ1ZX0="><style id="googleidentityservice_button_styles">.qJTHM{-webkit-user-select:none;color:#202124;direction:ltr;-webkit-touch-callout:none;font-family:"Roboto-Regular",arial,sans-serif;-webkit-font-smoothing:antialiased;font-weight:400;margin:0;overflow:hidden;-webkit-text-size-adjust:100%}.ynRLnc{left:-9999px;position:absolute;top:-9999px}.L6cTce{display:none}.bltWBb{word-break:break-all}.hSRGPd{color:#1a73e8;cursor:pointer;font-weight:500;text-decoration:none}.Bz112c-W3lGp{height:16px;width:16px}.Bz112c-E3DyYd{height:20px;width:20px}.Bz112c-r9oPif{height:24px;width:24px}.Bz112c-uaxL4e{-webkit-border-radius:10px;border-radius:10px}.LgbsSe-Bz112c{display:block}.S9gUrf-YoZ4jf,.S9gUrf-YoZ4jf *{border:none;margin:0;padding:0}.fFW7wc-ibnC6b>.aZ2wEe>div{border-color:#4285f4}.P1ekSe-ZMv3u>div:nth-child(1){background-color:#1a73e8!important}.P1ekSe-ZMv3u>div:nth-child(2),.P1ekSe-ZMv3u>div:nth-child(3){background-image:linear-gradient(to right,rgba(255,255,255,.7),rgba(255,255,255,.7)),linear-gradient(to right,#1a73e8,#1a73e8)!important}.haAclf{display:inline-block}.nsm7Bb-HzV7m-LgbsSe{-webkit-border-radius:4px;border-radius:4px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-transition:background-color .218s,border-color .218s;transition:background-color .218s,border-color .218s;-webkit-user-select:none;-webkit-appearance:none;background-color:#fff;background-image:none;border:1px solid #dadce0;color:#3c4043;cursor:pointer;font-family:"Google Sans",arial,sans-serif;font-size:14px;height:40px;letter-spacing:0.25px;outline:none;overflow:hidden;padding:0 12px;position:relative;text-align:center;vertical-align:middle;white-space:nowrap;width:auto}@media screen and (-ms-high-contrast:active){.nsm7Bb-HzV7m-LgbsSe{border:2px solid windowText;color:windowText}}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe{font-size:14px;height:32px;letter-spacing:0.25px;padding:0 10px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe{font-size:11px;height:20px;letter-spacing:0.3px;padding:0 8px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe{padding:0;width:40px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.pSzOP-SxQuSe{width:32px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.purZT-SxQuSe{width:20px}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK{-webkit-border-radius:20px;border-radius:20px}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK.pSzOP-SxQuSe{-webkit-border-radius:16px;border-radius:16px}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK.purZT-SxQuSe{-webkit-border-radius:10px;border-radius:10px}.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc{border:none;color:#fff}.nsm7Bb-HzV7m-LgbsSe.MFS4be-v3pZbf-Ia7Qfc{background-color:#1a73e8}.nsm7Bb-HzV7m-LgbsSe.MFS4be-JaPV2b-Ia7Qfc{background-color:#202124;color:#e8eaed}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{height:18px;margin-right:8px;min-width:18px;width:18px}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{height:14px;min-width:14px;width:14px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{height:10px;min-width:10px;width:10px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-Bz112c{margin-left:8px;margin-right:-4px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{margin:0;padding:10px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.pSzOP-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{padding:8px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{padding:4px}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-top-left-radius:3px;border-top-left-radius:3px;-webkit-border-bottom-left-radius:3px;border-bottom-left-radius:3px;display:-webkit-box;display:-webkit-flex;display:flex;justify-content:center;-webkit-align-items:center;align-items:center;background-color:#fff;height:36px;margin-left:-10px;margin-right:12px;min-width:36px;width:36px}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf .nsm7Bb-HzV7m-LgbsSe-Bz112c,.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf .nsm7Bb-HzV7m-LgbsSe-Bz112c{margin:0;padding:0}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{height:28px;margin-left:-8px;margin-right:10px;min-width:28px;width:28px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{height:16px;margin-left:-6px;margin-right:8px;min-width:16px;width:16px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:3px;border-radius:3px;margin-left:2px;margin-right:0;padding:0}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:18px;border-radius:18px}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:14px;border-radius:14px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:8px;border-radius:8px}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-bN97Pc-sM5MNb{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-flex-direction:row;flex-direction:row;justify-content:space-between;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;height:100%;position:relative;width:100%}.nsm7Bb-HzV7m-LgbsSe .oXtfBe-l4eHX{justify-content:center}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-BPrWId{-webkit-flex-grow:1;flex-grow:1;font-family:"Google Sans",arial,sans-serif;font-weight:500;overflow:hidden;text-overflow:ellipsis;vertical-align:top}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-BPrWId{font-weight:300}.nsm7Bb-HzV7m-LgbsSe .oXtfBe-l4eHX .nsm7Bb-HzV7m-LgbsSe-BPrWId{-webkit-flex-grow:0;flex-grow:0}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-MJoBVe{-webkit-transition:background-color .218s;transition:background-color .218s;bottom:0;left:0;position:absolute;right:0;top:0}.nsm7Bb-HzV7m-LgbsSe:hover,.nsm7Bb-HzV7m-LgbsSe:focus{-webkit-box-shadow:none;box-shadow:none;border-color:#d2e3fc;outline:none}.nsm7Bb-HzV7m-LgbsSe:hover .nsm7Bb-HzV7m-LgbsSe-MJoBVe,.nsm7Bb-HzV7m-LgbsSe:focus .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(66,133,244,.04)}.nsm7Bb-HzV7m-LgbsSe:active .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(66,133,244,.1)}.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc:hover .nsm7Bb-HzV7m-LgbsSe-MJoBVe,.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc:focus .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(255,255,255,.24)}.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc:active .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(255,255,255,.32)}.nsm7Bb-HzV7m-LgbsSe .n1UuX-DkfjY{-webkit-border-radius:50%;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:flex;height:20px;margin-left:-4px;margin-right:8px;min-width:20px;width:20px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId{font-family:"Roboto";font-size:12px;text-align:left}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .ssJRIf,.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff .fmcmS{overflow:hidden;text-overflow:ellipsis}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;color:#5f6368;fill:#5f6368;font-size:11px;font-weight:400}.nsm7Bb-HzV7m-LgbsSe.jVeSEe.MFS4be-Ia7Qfc .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff{color:#e8eaed;fill:#e8eaed}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff .Bz112c{height:18px;margin:-3px -3px -3px 2px;min-width:18px;width:18px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-top-left-radius:0;border-top-left-radius:0;-webkit-border-bottom-left-radius:0;border-bottom-left-radius:0;-webkit-border-top-right-radius:3px;border-top-right-radius:3px;-webkit-border-bottom-right-radius:3px;border-bottom-right-radius:3px;margin-left:12px;margin-right:-10px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:18px;border-radius:18px}.L5Fo6c-sM5MNb{border:0;display:block;left:0;position:relative;top:0}.L5Fo6c-bF1uUb{-webkit-border-radius:4px;border-radius:4px;bottom:0;cursor:pointer;left:0;position:absolute;right:0;top:0}.L5Fo6c-bF1uUb:focus{border:none;outline:none}sentinel{}</style><link id="googleidentityservice" type="text/css" media="all" rel="stylesheet" href="https://accounts.google.com/gsi/style"></head>
<body>
		<div class="page-container" style="">
	<div class="fixed-container">
			</div>
	<div id="login-container">
		
<script src="//www.google.com/recaptcha/api.js"></script>

<style>
    #LoginForm {
        overflow: auto;
        margin: 0 0 8px;
    }

    .separator {
        margin-top: 12px;
        display: flex;
        position: relative;
        margin: 1rem 0;
        text-align: center;
        justify-content: space-between;
        align-items: center;
        flex: 1
    }

    .separator__content {
        margin: 0 3rem
    }

    .separator::before, .separator::after {
        flex: 1;
        content: '';
        border-bottom: 1px solid #5f6c72
    }

    .separator--light {
        font-weight: 700;
        letter-spacing: 1px;
        text-transform: uppercase;
        color: #969ea2;
        font-size: 1.3rem
    }

    .separator--light::before, .separator--light::after {
        border-color: #dadfe2
    }

    .sso-container {
        padding: 2px 0 8px;
        text-align: center;
    }

    .sso-container:last-of-type {
        margin-bottom: 20px;
    }

    #login-group.with-redirect-uri {
        margin-top: 10px;
    }

</style>

<div id="login-spinner" class="loading-container relative" style="margin: auto; position: absolute !important;top: 0;left: 0;background: transparent; display: none;">
    <div class="loading-spinner la-ball-spin-clockwise">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </div>
</div>
<div id="login-group" class="">
    <div id="login-box">
        <div id="login-logo">
            
            <img src="https://portal.corpvoip.ca/ns-api/?object=image&amp;action=read&amp;server=portal.corpvoip.ca&amp;filename=portal_landing.png&amp;server=portal.corpvoip.ca">
        </div>

        <form action="/portal/login/login" id="LoginForm" class="form-stacked" method="post" accept-charset="utf-8"><div style="display:none;"><input type="hidden" name="_method" value="POST"></div>        <div class="hide">
            <input name="data[Login][vendor]" type="text" id="SsoVendor"><input name="data[Login][id_token]" type="text" id="SsoIdToken">        </div>

                    <div id="login-fields">
                <div>
                    <label for="username">Login Name</label>
                    <div>
                        <input name="data[Login][username]" type="text" id="LoginUsername">                    </div>
                </div>

                <div>
                    <label for="password">Password</label>
                    <div>
                        <input type="password" name="data[Login][password]" class="hide" id="LoginPassword">                    </div>
                                    </div>
            </div>

            <div id="login-submit" style="padding-bottom: 15px;">
                <div class="submit"><input class="btn btn-large color-primary" update="#login" complete="hideModalIf(&quot;#login&quot;);" type="submit" value="Log In"></div>            </div>

            <div id="reset-container" style="margin-bottom: 12px;">
                                    <div id="reset-links">
                        <a href="/portal/resets/forgotlogin" style="padding-right: 7px;">Forgot Login Name</a>|<a href="/portal/resets/forgotpassword" style="padding-left: 7px;">Forgot Password</a>
                    </div>
                            </div>

            <div id="ssoSeparator" class="separator separator--light" style="">
                <span class="separator__content">OR</span>
            </div>

            
        <div class="sso-container">
            <div id="google-sso" style="height: 44px; overflow: hidden; display: flex; justify-content: center"><div class="S9gUrf-YoZ4jf" style="position: relative;"><div></div><iframe src="https://accounts.google.com/gsi/button?theme=outline&amp;size=large&amp;shape=rectangle&amp;width=302&amp;logo_alignment=left&amp;client_id=244100468260-ffdm0afnjgcifl5fkdtch86fqq6qbgv4.apps.googleusercontent.com&amp;iframe_id=gsi_151133_166058&amp;as=woUsvukrnwMSDnkX%2FHERKw&amp;hl=en_us" id="gsi_151133_166058" title="Sign in with Google Button" style="display: block; position: relative; top: 0px; left: 0px; height: 44px; width: 322px; border: 0px; margin: -2px -10px;"></iframe></div></div>
        </div>
    
            <script>
              const aScript = document.createElement('script');
              aScript.type = 'text/javascript';
              aScript.src = 'https://accounts.google.com/gsi/client';
              document.head.appendChild(aScript);

              aScript.onload = () => {
                $('#ssoSeparator').show();

                window.google.accounts.id.initialize({
                  client_id: '244100468260-ffdm0afnjgcifl5fkdtch86fqq6qbgv4.apps.googleusercontent.com',
                  callback: (res) => {
                    if (res && res.credential) {
                      $('#SsoVendor').val('google');
                      $('#SsoIdToken').val(res.credential);
                      onSubmit();
                    }
                  },
                });

                window.google.accounts.id.renderButton(
                  document.getElementById('google-sso'),
                  {
                    theme: 'outline',
                    size: 'large',
                    shape: 'rectangle',
                    width: 302,
                    logo_alignment: 'left',
                    locale: 'en_us' || 'en_US',
                  },
                );
              };
            </script>
        
<style>
    #appleid-signin {
        display: none;
    }
</style>



        <div class="sso-container">
            <div id="officeSigninBtn" class="ssoLoginBtn btn btn-large">
                <span class="icon"><img src="/portal/img/office-logo.svg"></span>
                <span class="buttonText">
                    Log in with Office 365                </span>
            </div>

            <div id="officeSigninLoader" style="display: none;">
                <span class="icon"></span>
                <span class="buttonText">
                    Checking Office authorization...
                </span>
            </div>

            <div id="officeContinueBtn" class="ssoLoginBtn btn btn-large" style="display: none;">
                <span class="icon"><img src="/portal/img/google-logo.png"></span>
                <span class="buttonText">
                    Log in with Office                </span>
            </div>

            <div id="clientError" style="display: none;">
                Failed to initialize Office SSO application            </div>
        </div>
    
            <script src="https://secure.aadcdn.microsoftonline-p.com/lib/1.0.0/js/msal.js"></script>

            <script>
                $('#ssoSeparator').show();

                var officeIdToken = '';

                var msalConfig = {
                    auth: {
                        clientId: 'cda76e17-2e64-4d0b-90a6-97e585d11bba'
                    },
                    cache: {
                        cacheLocation: 'localStorage'
                    }
                };

                var authenticationParameters = {
                    scopes: ["user.read"], // optional Array<string>
                    prompt: "select_account",
                };

                //This maybe needs to be on a page load callback?
                var msalInstance = new Msal.UserAgentApplication(msalConfig);

                $('#officeSigninBtn').click( function() {
                    var thisPath = window.location.pathname;
                    window.history.pushState('portal', 'Login', '/portal/msal.php?c=cda76e17-2e64-4d0b-90a6-97e585d11bba'); // force base path so url can match allowed redirect urls

                    msalInstance.loginPopup(authenticationParameters)
                    .then(response => {
                        msalInstance.acquireTokenSilent(authenticationParameters)
                        .then(response => {
                            window.history.pushState('portal', 'Login', thisPath); // revert path after msal roundtrip

                            officeIdToken = response.accessToken;

                            $('#LoginUsername').val('');
                            $('#LoginPassword').val('');
                            $('#SsoVendor').val('office');
                            $('#SsoIdToken').val(officeIdToken);

                            onSubmit();
                        })
                        .catch(err => {
                            console.log('acquireTokenSilent fresh err',err)
                        });
                    })
                    .catch(err => {
                        console.log('loginPopup err',err)
                    });
                });
            </script>
        

        
        </form>    </div>

    
    <div class="login-language-container">
        <span class="dropdown language-dropdown"><i class="nsicon nsicon-language"></i> <a class="dropdown-toggle" data-toggle="dropdown">English<i class="caret"></i></a><ul class="dropdown-menu" role="menu"><li><a href="/portal/localizations/setLanguage/en_us">English-United States (English-United States)</a></li><li><a href="/portal/localizations/setLanguage/es_mx">Español-Mexico (Spanish-Mexico)</a></li><li><a href="/portal/localizations/setLanguage/fr_ca">Français-Canada (French-Canada)</a></li></ul></span>    </div>

    <div id="footer">
        
        <p>Powered by CorpVoIP Hosted PBX. Please dial 611 for Customer Service.</p>

            </div><!-- /login-box -->
</div><!-- /login-group -->


<script type="text/javascript">
    
    var ns_t = localStorage.getItem('ns_t');
    var jwt = parseJwt(ns_t);

    if (jwt) {
                  if (localStorage.getItem('jwtAutoLoginTS') == null || parseInt(localStorage.getItem('jwtAutoLoginTS')) < Date.now().getTime() - 30000) {
            if (jwt.exp > (Date.now().getTime() / 1000)) {
              $('#login-spinner').show();
              $('#login-group').hide();
              var username = jwt.login || jwt.sub;
              var expires = jwt.exp;
              localStorage.setItem('jwtAutoLoginTS', Date.now().getTime());
              window.location.replace("/portal/login/loginwithtoken?iframe=no&refresh_token=" + ns_t + "&username=" + username + "&avoidExpiredRedirect=true");
            }
          }
            }

    function parseJwt(token) {
      if (token) {
        var base64Url = token.split('.')[1];
        var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
        var jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {
          return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
        }).join(''));

        return JSON.parse(jsonPayload);
      }
    };
</script>

<script type="text/javascript">
  //OMP-1256
  //When auto-logged out, prevent redirect to controller if logging back in as a different user
  loginForm = $('.form-stacked');
  loginURL = loginForm.attr('action');

  if (loginURL.indexOf('page=') !== -1) {
    pageURL = loginURL;
    noPageURL = pageURL.replace(/(&?|\?)page=[a-z]*/g, '');
    usernameInput = $('#LoginUsername');
    origUsername = "@";

    usernameInput.on("input", function () {
      newUsername = usernameInput.val();
      if (newUsername != origUsername) {
        loginForm.attr('action', noPageURL);
        //window.history.pushState({},"", noPageURL);
      } else {
        loginForm.attr('action', pageURL);
        //window.history.pushState({},"", pageURL);
      }
    });
  }

  function enableLogin() {
    $('.submit input').removeAttr("disabled");
  }

  function onSubmit() {
    $('form').submit();
  }
</script>
	</div>
	<!-- majority of javascript at bottom so the page displays faster -->
		</div>



</body></html>